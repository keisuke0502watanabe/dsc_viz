# DSC Visualization Tool

DSC（示差走査熱量測定）データの可視化と解析を行うオフラインブラウザアプリケーションです。島津製作所のDSC装置から出力されるテキストファイルを読み込み、熱履歴プロファイルとDSC曲線を表示・解析できます。

## 特徴

### 📊 データ可視化
- **熱履歴プロファイル**: 時間 vs 温度のプロット
- **DSC曲線**: 温度 vs DSC値のプロット
- **デュアルプロット**: オフセットなしとオフセットありの2種類のDSC曲線を同時表示
- **色分け表示**: 昇温・冷却・等温セグメントを色分け

### 🔧 データ解析機能
- **自動Run検出**: 熱プログラム情報からRunを自動検出
- **手動Run調整**: Runの開始・終了時間を手動で調整可能
- **Run管理**: Runの追加・削除が可能
- **オフセット設定**: RunごとにDSC曲線のオフセットを適用

### 💾 データ管理
- **設定保存**: ブラウザのローカルストレージに設定を保存
- **エクスポート/インポート**: 設定をJSONファイルで保存・読み込み
- **複数ファイル対応**: 複数のDSCファイルを同時に処理

### 🎨 カスタマイズ
- **凡例設定**: 表示/非表示、位置調整
- **軸設定**: タイトル、ラベル、フォントのカスタマイズ
- **レスポンシブデザイン**: 様々な画面サイズに対応

## 使用方法

### 1. ファイルの準備
- 島津製作所のDSC装置から出力される`.txt`ファイルを準備
- ファイルはUTF-16エンコーディングで保存されている必要があります

### 2. データの読み込み
1. ブラウザで`dsc_thermal_dual_plot.html`を開く
2. 「ファイルを選択」ボタンで`.txt`ファイルを選択
3. 「データを読み込み」ボタンをクリック

### 3. データの確認
- **実験条件タブ**: 実験パラメータを確認
- **熱履歴タブ**: 熱プログラムの詳細を確認
- **データタブ**: 読み込まれたデータの最初の10行を確認

### 4. Runの設定
- **Run情報タブ**: 自動検出されたRunを確認・調整
- 手動でRunの開始・終了時間を調整可能
- Runの追加・削除が可能

### 5. プロット表示
- **Plotタブ**: 熱履歴プロファイルとDSC曲線を表示
- 凡例と軸の設定をカスタマイズ可能

## ファイル構成

```
dsc_viz/
├── dsc_thermal_dual_plot.html  # メインアプリケーション
├── README.md                   # このファイル
└── garage/                     # 開発履歴
    ├── dsc_offline.html
    ├── dsc_offline_fixed.html
    ├── dsc_simple_load.html
    ├── dsc_debug_load.html
    ├── dsc_three_sections.html
    ├── dsc_thermal_history.html
    ├── dsc_with_plot.html
    ├── dsc_color_offset.html
    ├── dsc_dual_plot.html
    ├── dsc_dual_dsc_plot.html
    ├── dsc_run_offset.html
    ├── dsc_thermal_run.html
    ├── dsc_advanced.html
    ├── dsc_python_to_html.html
    └── dsc_tripalmitin_c12tag_202507_3.py
```

## 技術仕様

### 使用技術
- **HTML5**: マークアップ
- **CSS3**: スタイリング
- **JavaScript (ES6+)**: アプリケーションロジック
- **Plotly.js**: データ可視化ライブラリ

### 対応ブラウザ
- Chrome (推奨)
- Firefox
- Safari
- Edge

### データ形式
- **入力**: 島津製作所DSC装置の`.txt`ファイル（UTF-16エンコーディング）
- **出力**: インタラクティブなプロット（Plotly.js）

## 機能詳細

### データ解析
1. **実験条件の抽出**: ファイルヘッダーから実験パラメータを抽出
2. **熱プログラムの解析**: 加熱速度、ホールド温度、ホールド時間、LN2、ガス情報を解析
3. **Run検出**: 熱プログラムの変化点からRunを自動検出
4. **データ変換**: 温度を℃からKに変換、データ型を最適化

### プロット機能
- **熱履歴プロファイル**: 時間 vs 温度（昇温・冷却・等温で色分け）
- **DSC曲線（オフセットなし）**: 全Runを重ねて表示
- **DSC曲線（オフセットあり）**: Runごとにオフセットを適用して表示
- **Run別熱履歴**: Run情報タブで各Runの熱履歴を個別表示

### 設定管理
- **ローカルストレージ**: ブラウザに設定を自動保存
- **エクスポート**: JSON形式で設定をファイル出力
- **インポート**: 保存した設定ファイルを読み込み
- **バージョン管理**: 設定ファイルにバージョン情報を含む

## 開発履歴

このプロジェクトは段階的に開発され、`garage/`フォルダに各バージョンが保存されています：

1. **初期版**: 基本的なデータ読み込みとプロット機能
2. **デバッグ版**: データ解析の改善とエラーハンドリング
3. **セクション分離版**: 実験条件、熱履歴、データの分離
4. **熱履歴解析版**: 熱プログラムの詳細解析
5. **プロット機能版**: 基本的なプロット表示
6. **デュアルプロット版**: 複数プロットの同時表示
7. **色分け・オフセット版**: 色分けとオフセット機能
8. **Run管理版**: Run検出と管理機能
9. **完全版**: 全機能を統合した最終版

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 貢献

バグ報告や機能要望は、GitHubのIssuesページでお知らせください。

## 更新履歴

- **v1.0.0** (2025-01-27): 初回リリース
  - 基本的なDSCデータ可視化機能
  - Run検出と管理機能
  - 設定の保存・読み込み機能
  - カスタマイズ可能なプロット表示
